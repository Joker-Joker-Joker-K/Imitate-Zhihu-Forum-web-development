<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/bulma/0.6.1/css/bulma.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/app.css">
    <title>Document</title>
</head>
<body>
    <!-- 主导航栏 -->
    <div class="navbar has-shadow">
    <div class="container">
        <div class="navbar-menu">
        <div class="navbar-start">
            <a href="/allQuestions" class="navbar-item">首页</a>
            <a href="/myQuestions" class="navbar-item">我的</a>
            <a href="/index" class="navbar-item">Master</a>
            <div class="navbar-item">
                <div class="field is-grouped">
                    <div class="control has-icons-right">
                    <input type="text" class="input " id="search_term" style="width: 20rem;" placeholder="搜索你感兴趣的内容...">
                    <span class="icon is-right">
                    <i class="fa fa-search"></i>
                    </span>
                    </div>
                    <div class="control">
                    <input type="submit" class="button is-info" id="search" value="搜索">
                    </div>
                </div>
            </div>
        </div>

        <div class="navbar-end">
            <!-- 消息 -->
            <a href="#" class="navbar-item">
            <i class="fa fa-15 fa-bell"></i>
            </a>
            <!-- 私信 -->
            <a href="#" class="navbar-item">
            <i class="fa fa-15 fa-comments"></i>
            </a>
            <!-- 个人简介 -->
            <a href="/myInformation" class="navbar-item">
            <!-- <img src="" alt="用户头像"> -->
            <i class="fa fa-15 fa-solid fa-user"></i>
            </a>
        </div>
        </div>
    </div>
    </div>
    <div class="navbar has-shadow" style="position: relative; top: 1px;">
        <div class="container">
            <div class="navbar-tabs">
                <a href="/myQuestions" class="navbar-item is-tab ">我的问题</a>
                <a href="/myArticals" class="navbar-item is-tab">我的文章</a>
                <a href="/myAnswers" class="navbar-item is-tab">我的回答</a>
                <a href="#" class="navbar-item is-tab">其它</a>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="container" >
            <div class="tile" style="width: 500px; margin:0 auto;">
                <!-- 修改个人信息 -->
                <div class="tile is-vertical is-parent" >
                    <!-- <div class="card">
                        <div class="card-header">
                            <p class="card-header-title"><button class="button is-info" id="addQuestion">发布问题</button></p>
                        </div>
                        <div class="card-content">
                            
                            <input type="text" class="input" id="addQuestion_text" style="width: 20rem;height: 5rem;" placeholder="勇敢提问吧...">
                        </div>
                    </div> -->
                    <div class="card">
                        <div class="card-header">
                            <p class="card-header-title" id="username1">{{user[0].用户名}}</p><span style="display: inline-block;line-height: 20px;margin-top: 10px;"><i class="fa far fa-edit fa-2x" id="edit"></i></span>
                            <p>
                                <input class="input is-primary is-small "style="display:none;" id="username2" type="text" placeholder="用户名:{{user[0].用户名}}">
                                
                            </p><span style="display: block;margin-left: 280px;margin-top: 1px;"><i class="fa fal fa-paper-plane fa-2x"style="display:none ;" id="submit"></i></span>
                            

                        </div>
                        <div class="card-content">
                            <div class="media">
                                <div class="media-left">
                                    <figure class="image is-64x64">
                                        <!-- 用户头像 -->
                                        <img src="#" alt="">
                                    </figure>
                                </div>
                                <div class="media-content">
                                    <p>
                                        <!-- 空格 -->
                                        <strong id="usersay1">&emsp;&emsp;{{user[0].用户介绍}}</strong>
                                    </p>
                                    <p>
                                        <input class="input is-primary is-normal " style="display:none ;" id="usersay2" type="text" placeholder="用户介绍:{{user[0].用户介绍}}">
                                    </p>
                                    
                                    <p>
                                        文章 | 提问 | 回答 
                                        <span class="tag is-gray">赞</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <p class="card-header-title">详细信息</p>
                        </div>
                        <div class="card-content" >
                            <ul class="lh-20" id="ul1">
                                <li>性别：{{user[0].性别}}</li>
                                <li>学校：{{user[0].学校}}</li>
                                <li>院系专业：{{user[0].院系专业}}</li>
                                <li>学号：{{user[0].学号}}</li>
                            </ul>
                            <ul class="lh-20" id="ul2" style="display:none ;" >
                                <li><input class="input is-primary is-small " style="width: 250px;" id="li_sex" type="text" placeholder="性别：{{user[0].性别}}"></li>
                                <li><input class="input is-primary is-small " style="width: 250px;" id="li_school" type="text" placeholder="学校:{{user[0].学校}}"></li>
                                <li><input class="input is-primary is-small " style="width: 250px;" id="li_major" type="text" placeholder="院系专业:{{user[0].院系专业}}"></li>
                                <li><input class="input is-primary is-small " style="width: 250px;" id="li_number" type="text" placeholder="学号:{{user[0].学号}}"></li>
                            </ul>
                            
                        </div>
                    </div>
                </div>

                
            </div>
        </div>
    </div>
</body>
</html>

<!-- #引入Jquery -->
<script src="../static/jquery-1.12.4.min.js"></script>
<script>


    // 开始写 jQuery 代码...
    $(function(){
        
        $("#search").click(function(){
            alert("跳转到全局搜索");
            var search_term = $("#search_term").val();
            var data = {
                    "search_term":search_term
                }
                
            
            // 锁定当前标签
            $.ajax({
                url: "/showSearch/"+search_term,
                type: "get",
                success: function (response) {
                    console.log(response);
                    // alert(data);
                    window.location.replace('/showSearch/'+search_term); 
                },
                error: function(error) {
                    console.log(error);
                }
            })
        });



        $("#edit").click(function(){
            alert("修改！");
            $("#edit").hide();
            $("#username1").hide();
            $("#usersay1").hide();
            $("#ul1").hide();
            $("#submit").show();
            $("#username2").show();
            $("#usersay2").show();
            $("#ul2").show();
            var data = {
                "username":$("#username1").text(),
                "usersay":$("#usersay1").text(),
                "li_sex":$("#ul1 li:eq(0)").text(),
                "li_school":$("#ul1 li:eq(1)").text(),
                "li_major":$("#ul1 li:eq(2)").text(),
                "li_number":$("#ul1 li:eq(3)").text(),
                };
                // 可以增加一些筛选条件
            
        });
        $("#submit").click(function(){
            alert("修改完成！");
            $("#edit").show();
            $("#username1").show();
            $("#usersay1").show();
            $("#ul1").show();
            $("#submit").hide();
            $("#username1").hide();
            $("#usersay2").hide();
            $("#ul2").hide();
            var data = {
                "username":$("#username2").val(),
                "usersay":$("#usersay2").val(),
                "li_sex":$("#li_sex").val(),
                "li_school":$("#li_school").val(),
                "li_major":$("#li_major").val(),
                "li_number":$("#li_number").val(),
                }
            
            
            if(data.li_major!=null&&data.li_number!=null&&data.li_sex!=null&&data.li_school!=null
                &&data.username!=null&&data.usersay!=null){

                $.ajax({
                url: "/myInformation",
                type: "post",
                data:data,
                success: function (response) {
                    console.log(response);
                    // alert(data);
                    window.location.reload(); 
                },
                error: function(error) {
                    console.log(error);
                }
            })
            
        }else{
            alert("请输入完整信息")
        }

    });


})




</script>









